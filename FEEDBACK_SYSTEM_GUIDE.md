# 피드백 시스템 가이드

## 개요
관리자가 직원의 테스트 결과를 검토하고 각 역량별로 상세한 피드백을 제공할 수 있는 시스템입니다.

## 주요 기능

### 1. 관리자 기능
- **테스트 결과 조회**: 직원들의 테스트 결과 확인
- **종합 피드백 작성**: 전체적인 평가와 평점 부여 (1-5점)
- **역량별 상세 피드백**: 5개 역량 각각에 대한 개별 피드백
  - 피드백 내용
  - 강점 분석
  - 개선 사항
  - 실행 계획
- **템플릿 활용**: 점수대별 피드백 템플릿 적용
- **임시 저장**: 작성 중인 피드백 임시 저장

### 2. 직원 기능
- **피드백 조회**: 받은 모든 피드백 목록 확인
- **상세 피드백 확인**: 각 역량별 상세 피드백 열람
- **알림 기능**: 새로운 피드백 알림
- **읽음 표시**: 피드백 확인 시 자동 읽음 처리

## 데이터베이스 구조

### 테이블 구조
```sql
-- 메인 피드백 테이블
test_feedback
├── id (PK)
├── result_id (FK -> test_results)
├── user_id (FK -> users)
├── admin_id (FK -> users)
├── company_id (FK -> companies)
├── overall_feedback (종합 피드백)
├── overall_rating (1-5점)
├── is_read (읽음 여부)
└── timestamps

-- 역량별 피드백
competency_feedback
├── id (PK)
├── feedback_id (FK -> test_feedback)
├── competency_type (역량 타입)
├── score (점수)
├── feedback (피드백)
├── strengths (강점)
├── improvements (개선사항)
└── action_items (실행계획)

-- 피드백 템플릿
feedback_templates
├── id (PK)
├── company_id (회사별 템플릿)
├── template_name
├── competency_type
├── score_range (점수 범위)
├── template_text
└── template_type (strength/improvement/action_item)

-- 피드백 알림
feedback_notifications
├── id (PK)
├── feedback_id (FK -> test_feedback)
├── user_id (FK -> users)
├── is_read
└── timestamps
```

## API 엔드포인트

### 피드백 작성/수정
```
POST /api/admin/feedback/:resultId
```
- 관리자 권한 필요
- 종합 피드백과 역량별 피드백 저장

### 피드백 조회
```
GET /api/admin/feedback/:resultId
```
- 해당 테스트 결과의 피드백 조회
- 본인 또는 관리자만 접근 가능

### 사용자별 피드백 목록
```
GET /api/admin/user/:userId/feedback
```
- 특정 사용자의 모든 피드백 조회
- 페이지네이션 지원

### 템플릿 조회
```
GET /api/admin/templates
```
- 역량별, 점수대별 템플릿 조회
- 회사별 커스텀 템플릿 지원

### 알림 조회
```
GET /api/admin/notifications
```
- 읽지 않은 피드백 알림 조회

## 사용 방법

### 관리자 피드백 작성

1. **관리자 대시보드 접속**
   - `/admin-dashboard.html` 접속
   - 직원 테스트 결과 목록 확인

2. **피드백 작성 페이지 이동**
   - 테스트 결과에서 "피드백 작성" 버튼 클릭
   - `/admin-feedback.html?resultId=xxx` 페이지로 이동

3. **피드백 작성**
   - 종합 평가 작성 및 평점 선택 (1-5점)
   - 각 역량별 상세 피드백 작성
   - 템플릿 활용 가능

4. **저장**
   - "피드백 저장" 클릭으로 최종 저장
   - "임시 저장"으로 작성 중 저장

### 직원 피드백 확인

1. **마이페이지 접속**
   - `/mypage.html` 또는 `/my-feedback.html` 접속

2. **피드백 목록 확인**
   - 받은 피드백 목록 표시
   - 새 피드백은 빨간색 표시

3. **상세 피드백 열람**
   - 피드백 카드 클릭으로 상세 내용 확인
   - 역량별 피드백 및 실행 계획 확인

## 피드백 템플릿 예시

### 문제해결능력 템플릿
```
80-100점 (우수)
"뛰어난 문제 해결 능력을 보여주셨습니다. 체계적인 접근과 창의적인 해결책을 제시하는 능력이 돋보입니다."

60-79점 (양호)
"문제 해결 능력이 양호합니다. 더 다양한 관점에서 문제를 바라보시면 좋겠습니다."

0-59점 (개선 필요)
"문제 해결 과정에서 체계적인 접근이 필요합니다. 문제 분석 단계를 강화하시기 바랍니다."
```

### 실행 계획 템플릿
```
1. 문제 분석 프레임워크 학습
2. 케이스 스터디 연습
3. 멘토와 정기 미팅
4. 관련 교육 프로그램 참여
```

## 보안 및 권한

### 권한 체크
- **작성 권한**: 같은 회사의 관리자 또는 슈퍼 관리자
- **조회 권한**: 
  - 본인의 피드백: 항상 조회 가능
  - 타인의 피드백: 같은 회사 관리자만 조회 가능

### 데이터 보호
- 피드백 내용은 암호화되어 저장
- 삭제된 사용자의 피드백은 익명 처리
- 회사 간 피드백 정보 격리

## 향후 개선 사항

1. **AI 피드백 제안**
   - 점수 기반 자동 피드백 생성
   - 과거 피드백 패턴 학습

2. **피드백 추적**
   - 시간에 따른 개선 추이 그래프
   - 피드백 반영도 측정

3. **팀 피드백**
   - 팀 전체 피드백 대시보드
   - 부서별 통계 및 비교

4. **피드백 리마인더**
   - 주기적인 피드백 알림
   - 개선 계획 실행 리마인더

## 문제 해결

### 피드백이 저장되지 않을 때
1. 네트워크 연결 확인
2. 관리자 권한 확인
3. 필수 필드 (종합 평점) 입력 확인

### 피드백이 보이지 않을 때
1. 로그인 상태 확인
2. 권한 확인 (본인 또는 관리자)
3. 데이터베이스 연결 상태 확인

### 템플릿이 적용되지 않을 때
1. 점수 범위 확인
2. 역량 타입 매칭 확인
3. 템플릿 활성화 상태 확인

## 결론

피드백 시스템은 직원의 성장과 발전을 위한 중요한 도구입니다. 관리자는 구체적이고 건설적인 피드백을 제공하고, 직원은 이를 통해 자신의 강점과 개선점을 명확히 파악할 수 있습니다.