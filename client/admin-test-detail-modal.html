<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìƒì„¸ - ì‹ ì…ì‚¬ì› ì—­ëŸ‰ê²€ì‚¬</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .modal-header {
            background: #2c3e50;
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h2 {
            margin: 0;
            font-size: 20px;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: background 0.2s;
        }
        
        .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .modal-body {
            overflow-y: auto;
            flex: 1;
            padding: 30px;
        }
        
        /* í…ŒìŠ¤íŠ¸ ì •ë³´ ì„¹ì…˜ */
        .test-info-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .test-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
        }
        
        .info-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .info-value {
            font-size: 16px;
            color: #2c3e50;
            font-weight: 500;
        }
        
        /* ì ìˆ˜ ì„¹ì…˜ */
        .scores-section {
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .overall-score-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 25px;
        }
        
        .overall-score-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .overall-score-value {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .score-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .competency-scores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .competency-card {
            background: white;
            border: 1px solid #e9ecef;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .competency-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .competency-name {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            text-transform: uppercase;
        }
        
        .competency-score {
            font-size: 28px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .score-diff {
            font-size: 12px;
            font-weight: 500;
            margin-top: 2px;
        }
        
        .score-diff.positive {
            color: #28a745;
        }
        
        .score-diff.negative {
            color: #dc3545;
        }
        
        .score-bar {
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .score-fill {
            height: 100%;
            background: #3498db;
            transition: width 0.5s ease;
        }
        
        /* ì°¨íŠ¸ ì„¹ì…˜ */
        .chart-section {
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            height: 300px;
            position: relative;
        }
        
        /* ë‹µë³€ ìƒì„¸ ì„¹ì…˜ */
        .answers-section {
            margin-bottom: 30px;
        }
        
        .category-answers {
            margin-bottom: 25px;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .category-header {
            background: #f8f9fa;
            padding: 15px 20px;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }
        
        .category-header:hover {
            background: #e9ecef;
        }
        
        .category-score {
            font-size: 14px;
            color: #666;
        }
        
        .answers-list {
            padding: 20px;
            display: none;
        }
        
        .answers-list.expanded {
            display: block;
        }
        
        .answer-item {
            padding: 12px 0;
            border-bottom: 1px solid #f1f3f5;
        }
        
        .answer-item:last-child {
            border-bottom: none;
        }
        
        .question-text {
            font-size: 14px;
            color: #495057;
            margin-bottom: 8px;
        }
        
        .answer-value {
            display: inline-block;
            padding: 4px 12px;
            background: #e9ecef;
            border-radius: 15px;
            font-size: 13px;
            color: #495057;
        }
        
        .answer-value.positive {
            background: #d4edda;
            color: #155724;
        }
        
        .answer-value.negative {
            background: #f8d7da;
            color: #721c24;
        }
        
        /* ë¡œë”© ìƒíƒœ */
        .loading {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ì˜¤ë¥˜ ìƒíƒœ */
        .error-message {
            background: #fee;
            color: #c33;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .modal-content {
                width: 95%;
                max-height: 95vh;
            }
            
            .modal-body {
                padding: 20px;
            }
            
            .competency-scores {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div id="testDetailModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìƒì„¸</h2>
                <button class="close-btn" onclick="closeTestDetailModal()">&times;</button>
            </div>
            
            <div class="modal-body" id="modalBody">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const API_URL = window.location.protocol === 'file:' 
            ? 'http://localhost:3000'
            : (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
                ? 'http://localhost:3000' 
                : window.location.origin);
        
        let currentResultId = null;
        let chartInstance = null;
        
        // ëª¨ë‹¬ ì—´ê¸°
        function openTestDetailModal(resultId) {
            currentResultId = resultId;
            document.getElementById('testDetailModal').classList.add('active');
            loadTestDetail(resultId);
        }
        
        // ëª¨ë‹¬ ë‹«ê¸°
        function closeTestDetailModal() {
            document.getElementById('testDetailModal').classList.remove('active');
            if (chartInstance) {
                chartInstance.destroy();
                chartInstance = null;
            }
        }
        
        // í…ŒìŠ¤íŠ¸ ìƒì„¸ ì •ë³´ ë¡œë“œ
        async function loadTestDetail(resultId) {
            const modalBody = document.getElementById('modalBody');
            
            try {
                const token = localStorage.getItem('adminToken');
                if (!token) {
                    throw new Error('ì¸ì¦ í† í°ì´ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                const response = await fetch(`${API_URL}/api/admin/test-results/${resultId}`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                const data = await response.json();
                displayTestDetail(data);
                
            } catch (error) {
                console.error('í…ŒìŠ¤íŠ¸ ìƒì„¸ ë¡œë“œ ì˜¤ë¥˜:', error);
                modalBody.innerHTML = `
                    <div class="error-message">
                        ${error.message || 'ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'}
                    </div>
                `;
            }
        }
        
        // í…ŒìŠ¤íŠ¸ ìƒì„¸ ì •ë³´ í‘œì‹œ
        function displayTestDetail(data) {
            const { testResult, answers, companyAverage } = data;
            const modalBody = document.getElementById('modalBody');
            
            const testDate = new Date(testResult.test_date);
            const submittedAt = new Date(testResult.submitted_at);
            
            modalBody.innerHTML = `
                <!-- í…ŒìŠ¤íŠ¸ ì •ë³´ -->
                <div class="test-info-section">
                    <div class="test-info-grid">
                        <div class="info-item">
                            <div class="info-label">ì‘ì‹œì</div>
                            <div class="info-value">${testResult.user_name}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ì´ë©”ì¼</div>
                            <div class="info-value">${testResult.user_email}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ì†Œì†</div>
                            <div class="info-value">${testResult.company_name || 'ë¯¸í• ë‹¹'}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ì‘ì‹œì¼</div>
                            <div class="info-value">${testDate.toLocaleDateString()}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ì‘ì‹œì‹œê°„</div>
                            <div class="info-value">${testDate.toLocaleTimeString()}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ì†Œìš”ì‹œê°„</div>
                            <div class="info-value">${calculateDuration(testDate, submittedAt)}</div>
                        </div>
                    </div>
                </div>
                
                <!-- ì ìˆ˜ ì„¹ì…˜ -->
                <div class="scores-section">
                    <h3 class="section-title">ğŸ“Š í‰ê°€ ê²°ê³¼</h3>
                    
                    <!-- ì¢…í•© ì ìˆ˜ -->
                    <div class="overall-score-card">
                        <div class="overall-score-label">ì¢…í•© ì ìˆ˜</div>
                        <div class="overall-score-value">${testResult.overall_score}ì </div>
                        <div class="score-badge">${getScoreGrade(testResult.overall_score)}</div>
                        ${companyAverage ? `<div style="margin-top: 10px; font-size: 14px; opacity: 0.9;">ì¡°ì§ í‰ê· : ${parseFloat(companyAverage.avg_overall).toFixed(1)}ì  (${testResult.overall_score >= companyAverage.avg_overall ? '+' : ''}${(testResult.overall_score - companyAverage.avg_overall).toFixed(1)})</div>` : ''}
                    </div>
                    
                    <!-- ì—­ëŸ‰ë³„ ì ìˆ˜ -->
                    <div class="competency-scores">
                        <div class="competency-card">
                            <div class="competency-name">ë¬¸ì œí•´ê²°ëŠ¥ë ¥</div>
                            <div class="competency-score">${testResult.problem_solving_score}</div>
                            ${companyAverage ? `<div class="score-diff ${testResult.problem_solving_score >= companyAverage.avg_problem_solving ? 'positive' : 'negative'}">${testResult.problem_solving_score >= companyAverage.avg_problem_solving ? '+' : ''}${(testResult.problem_solving_score - companyAverage.avg_problem_solving).toFixed(1)}</div>` : ''}
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${testResult.problem_solving_score}%"></div>
                            </div>
                        </div>
                        <div class="competency-card">
                            <div class="competency-name">ì»¤ë®¤ë‹ˆì¼€ì´ì…˜</div>
                            <div class="competency-score">${testResult.communication_score}</div>
                            ${companyAverage ? `<div class="score-diff ${testResult.communication_score >= companyAverage.avg_communication ? 'positive' : 'negative'}">${testResult.communication_score >= companyAverage.avg_communication ? '+' : ''}${(testResult.communication_score - companyAverage.avg_communication).toFixed(1)}</div>` : ''}
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${testResult.communication_score}%"></div>
                            </div>
                        </div>
                        <div class="competency-card">
                            <div class="competency-name">ë¦¬ë”ì‹­</div>
                            <div class="competency-score">${testResult.leadership_score}</div>
                            ${companyAverage ? `<div class="score-diff ${testResult.leadership_score >= companyAverage.avg_leadership ? 'positive' : 'negative'}">${testResult.leadership_score >= companyAverage.avg_leadership ? '+' : ''}${(testResult.leadership_score - companyAverage.avg_leadership).toFixed(1)}</div>` : ''}
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${testResult.leadership_score}%"></div>
                            </div>
                        </div>
                        <div class="competency-card">
                            <div class="competency-name">ì°½ì˜ì„±</div>
                            <div class="competency-score">${testResult.creativity_score}</div>
                            ${companyAverage ? `<div class="score-diff ${testResult.creativity_score >= companyAverage.avg_creativity ? 'positive' : 'negative'}">${testResult.creativity_score >= companyAverage.avg_creativity ? '+' : ''}${(testResult.creativity_score - companyAverage.avg_creativity).toFixed(1)}</div>` : ''}
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${testResult.creativity_score}%"></div>
                            </div>
                        </div>
                        <div class="competency-card">
                            <div class="competency-name">íŒ€ì›Œí¬</div>
                            <div class="competency-score">${testResult.teamwork_score}</div>
                            ${companyAverage ? `<div class="score-diff ${testResult.teamwork_score >= companyAverage.avg_teamwork ? 'positive' : 'negative'}">${testResult.teamwork_score >= companyAverage.avg_teamwork ? '+' : ''}${(testResult.teamwork_score - companyAverage.avg_teamwork).toFixed(1)}</div>` : ''}
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${testResult.teamwork_score}%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ë ˆì´ë” ì°¨íŠ¸ -->
                <div class="chart-section">
                    <h3 class="section-title">ğŸ“ˆ ì—­ëŸ‰ ë¶„ì„ ì°¨íŠ¸</h3>
                    <div class="chart-container">
                        <canvas id="competencyRadarChart"></canvas>
                    </div>
                </div>
                
                <!-- ë‹µë³€ ìƒì„¸ -->
                <div class="answers-section">
                    <h3 class="section-title">ğŸ“ ë‹µë³€ ìƒì„¸</h3>
                    ${generateAnswersHTML(answers)}
                </div>
            `;
            
            // ì°¨íŠ¸ ê·¸ë¦¬ê¸°
            drawCompetencyChart(testResult, companyAverage);
            
            // ì¹´í…Œê³ ë¦¬ í† ê¸€ ì´ë²¤íŠ¸ ì¶”ê°€
            addCategoryToggleEvents();
        }
        
        // ì†Œìš”ì‹œê°„ ê³„ì‚°
        function calculateDuration(start, end) {
            const diff = end - start;
            const minutes = Math.floor(diff / 60000);
            const seconds = Math.floor((diff % 60000) / 1000);
            return `${minutes}ë¶„ ${seconds}ì´ˆ`;
        }
        
        // ì ìˆ˜ ë“±ê¸‰ ë°˜í™˜
        function getScoreGrade(score) {
            if (score >= 90) return 'ë§¤ìš° ìš°ìˆ˜';
            if (score >= 80) return 'ìš°ìˆ˜';
            if (score >= 70) return 'ì–‘í˜¸';
            if (score >= 60) return 'ë³´í†µ';
            return 'ë¯¸í¡';
        }
        
        // ë‹µë³€ HTML ìƒì„±
        function generateAnswersHTML(answers) {
            // ë‹µë³€ì„ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ê·¸ë£¹í™”
            const categories = {
                'ë¬¸ì œí•´ê²°ëŠ¥ë ¥': { questions: [], range: [1, 15] },
                'ì»¤ë®¤ë‹ˆì¼€ì´ì…˜': { questions: [], range: [16, 30] },
                'ë¦¬ë”ì‹­': { questions: [], range: [31, 45] },
                'ì°½ì˜ì„±': { questions: [], range: [46, 60] },
                'íŒ€ì›Œí¬': { questions: [], range: [61, 75] }
            };
            
            // ë¬¸ì œ í…ìŠ¤íŠ¸ (ê°„ë‹¨íˆ)
            const questionTexts = getQuestionTexts();
            
            answers.forEach(answer => {
                const qid = answer.question_id;
                let category = '';
                
                if (qid >= 1 && qid <= 15) category = 'ë¬¸ì œí•´ê²°ëŠ¥ë ¥';
                else if (qid >= 16 && qid <= 30) category = 'ì»¤ë®¤ë‹ˆì¼€ì´ì…˜';
                else if (qid >= 31 && qid <= 45) category = 'ë¦¬ë”ì‹­';
                else if (qid >= 46 && qid <= 60) category = 'ì°½ì˜ì„±';
                else if (qid >= 61 && qid <= 75) category = 'íŒ€ì›Œí¬';
                
                if (category) {
                    categories[category].questions.push({
                        id: qid,
                        text: questionTexts[qid - 1] || `ë¬¸ì œ ${qid}`,
                        answer: answer.answer
                    });
                }
            });
            
            let html = '';
            
            for (const [category, data] of Object.entries(categories)) {
                const avgScore = calculateCategoryAverage(data.questions);
                
                html += `
                    <div class="category-answers">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <span>${category} (${data.questions.length}ë¬¸í•­)</span>
                            <span class="category-score">í‰ê· : ${avgScore}ì </span>
                        </div>
                        <div class="answers-list">
                            ${data.questions.map(q => `
                                <div class="answer-item">
                                    <div class="question-text">${q.id}. ${q.text}</div>
                                    <span class="answer-value ${getAnswerClass(q.answer)}">${q.answer}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            return html;
        }
        
        // ì¹´í…Œê³ ë¦¬ë³„ í‰ê·  ì ìˆ˜ ê³„ì‚°
        function calculateCategoryAverage(questions) {
            const scores = questions.map(q => {
                switch (q.answer) {
                    case 'ë§¤ìš° ê·¸ë ‡ë‹¤': return 100;
                    case 'ê·¸ë ‡ë‹¤': return 75;
                    case 'ë³´í†µ': return 50;
                    case 'ì•„ë‹ˆë‹¤': return 25;
                    case 'ë§¤ìš° ì•„ë‹ˆë‹¤': return 0;
                    default: return 50;
                }
            });
            
            const avg = scores.reduce((sum, score) => sum + score, 0) / scores.length;
            return Math.round(avg);
        }
        
        // ë‹µë³€ í´ë˜ìŠ¤ ë°˜í™˜
        function getAnswerClass(answer) {
            if (answer === 'ë§¤ìš° ê·¸ë ‡ë‹¤' || answer === 'ê·¸ë ‡ë‹¤') return 'positive';
            if (answer === 'ì•„ë‹ˆë‹¤' || answer === 'ë§¤ìš° ì•„ë‹ˆë‹¤') return 'negative';
            return '';
        }
        
        // ì—­ëŸ‰ ì°¨íŠ¸ ê·¸ë¦¬ê¸°
        function drawCompetencyChart(testResult, companyAverage) {
            const ctx = document.getElementById('competencyRadarChart').getContext('2d');
            
            if (chartInstance) {
                chartInstance.destroy();
            }
            
            const datasets = [{
                label: testResult.user_name || 'ê°œì¸ ì ìˆ˜',
                data: [
                    testResult.problem_solving_score,
                    testResult.communication_score,
                    testResult.leadership_score,
                    testResult.creativity_score,
                    testResult.teamwork_score
                ],
                backgroundColor: 'rgba(102, 126, 234, 0.25)',
                borderColor: '#667eea',
                borderWidth: 2,
                pointBackgroundColor: '#667eea',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: '#667eea',
                pointRadius: 5,
                pointHoverRadius: 7
            }];
            
            if (companyAverage) {
                datasets.push({
                    label: 'ì¡°ì§ í‰ê· ',
                    data: [
                        parseFloat(companyAverage.avg_problem_solving),
                        parseFloat(companyAverage.avg_communication),
                        parseFloat(companyAverage.avg_leadership),
                        parseFloat(companyAverage.avg_creativity),
                        parseFloat(companyAverage.avg_teamwork)
                    ],
                    backgroundColor: 'rgba(255, 99, 132, 0.25)',
                    borderColor: '#ff6384',
                    borderWidth: 2,
                    pointBackgroundColor: '#ff6384',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#ff6384',
                    pointRadius: 5,
                    pointHoverRadius: 7
                });
            }
            
            chartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['ë¬¸ì œí•´ê²°ëŠ¥ë ¥', 'ì»¤ë®¤ë‹ˆì¼€ì´ì…˜', 'ë¦¬ë”ì‹­', 'ì°½ì˜ì„±', 'íŒ€ì›Œí¬'],
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom',
                            labels: {
                                boxWidth: 15,
                                padding: 10
                            }
                        }
                    }
                }
            });
        }
        
        // ì¹´í…Œê³ ë¦¬ í† ê¸€
        function toggleCategory(header) {
            const answersList = header.nextElementSibling;
            answersList.classList.toggle('expanded');
        }
        
        // ì¹´í…Œê³ ë¦¬ í† ê¸€ ì´ë²¤íŠ¸ ì¶”ê°€
        function addCategoryToggleEvents() {
            // ì´ë¯¸ onclickìœ¼ë¡œ ì²˜ë¦¬ë¨
        }
        
        // ë¬¸ì œ í…ìŠ¤íŠ¸ (ì‹¤ì œ ë¬¸ì œ)
        function getQuestionTexts() {
            return [
                // ë¬¸ì œí•´ê²°ëŠ¥ë ¥ (1-15)
                'ë³µì¡í•œ ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ ì²´ê³„ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  í•´ê²°ì±…ì„ ì°¾ëŠ”ë‹¤.',
                'ì–´ë ¤ìš´ ìƒí™©ì—ì„œë„ í¬ê¸°í•˜ì§€ ì•Šê³  ëê¹Œì§€ í•´ê²°ë°©ë²•ì„ ëª¨ìƒ‰í•œë‹¤.',
                'ë¬¸ì œì˜ ì›ì¸ì„ ì •í™•íˆ íŒŒì•…í•˜ê¸° ìœ„í•´ ì¶©ë¶„í•œ ì •ë³´ë¥¼ ìˆ˜ì§‘í•œë‹¤.',
                'ì—¬ëŸ¬ ê°€ì§€ í•´ê²°ë°©ì•ˆì„ ê²€í† í•œ í›„ ìµœì ì˜ ë°©ë²•ì„ ì„ íƒí•œë‹¤.',
                'ì˜ˆìƒì¹˜ ëª»í•œ ìƒí™©ì—ì„œë„ ë¹ ë¥´ê²Œ ëŒ€ì‘í•  ìˆ˜ ìˆë‹¤.',
                'ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ì°½ì˜ì ì¸ ì ‘ê·¼ë°©ë²•ì„ ì‹œë„í•œë‹¤.',
                'ì‹œê°„ì  ì œì•½ì´ ìˆì–´ë„ íš¨ìœ¨ì ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.',
                'ì‹¤íŒ¨í•œ ê²½í—˜ì„ í†µí•´ ë” ë‚˜ì€ í•´ê²°ì±…ì„ ì°¾ëŠ”ë‹¤.',
                'ë…¼ë¦¬ì  ì‚¬ê³ ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë¬¸ì œë¥¼ ë¶„ì„í•œë‹¤.',
                'ë¬¸ì œ ìƒí™©ì—ì„œ ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ì—¬ ì²´ê³„ì ìœ¼ë¡œ ì ‘ê·¼í•œë‹¤.',
                'ë‹¤ì–‘í•œ ê´€ì ì—ì„œ ë¬¸ì œë¥¼ ë°”ë¼ë³´ë ¤ê³  ë…¸ë ¥í•œë‹¤.',
                'ë¬¸ì œ í•´ê²° ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì¥ì• ë¬¼ì„ ê·¹ë³µí•œë‹¤.',
                'ê³¼ê±°ì˜ ê²½í—˜ì„ í™œìš©í•˜ì—¬ í˜„ì¬ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.',
                'ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ í•„ìš”í•œ ìì›ì„ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•œë‹¤.',
                'ë¬¸ì œ í•´ê²° í›„ ê²°ê³¼ë¥¼ í‰ê°€í•˜ê³  ê°œì„ ì ì„ ì°¾ëŠ”ë‹¤.',
                
                // ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ (16-30)
                'ë‹¤ë¥¸ ì‚¬ëŒì˜ ì˜ê²¬ì„ ì£¼ì˜ ê¹Šê²Œ ë“£ê³  ì´í•´í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤.',
                'ë‚´ ìƒê°ê³¼ ì˜ê²¬ì„ ëª…í™•í•˜ê³  ì´í•´í•˜ê¸° ì‰½ê²Œ ì „ë‹¬í•œë‹¤.',
                'ìƒëŒ€ë°©ì˜ ì…ì¥ì—ì„œ ìƒê°í•˜ë©° ì†Œí†µí•œë‹¤.',
                'ê°ˆë“± ìƒí™©ì—ì„œ ìƒí˜¸ ì´í•´ë¥¼ ë•ëŠ” ëŒ€í™”ë¥¼ ì‹œë„í•œë‹¤.',
                'í”¼ë“œë°±ì„ ë°›ì„ ë•Œ ì—´ë¦° ë§ˆìŒìœ¼ë¡œ ìˆ˜ìš©í•œë‹¤.',
                'ë¹„ì–¸ì–´ì  í‘œí˜„(ëª¸ì§“, í‘œì • ë“±)ì„ íš¨ê³¼ì ìœ¼ë¡œ í™œìš©í•œë‹¤.',
                'ìƒí™©ì— ë§ëŠ” ì ì ˆí•œ ì–¸ì–´ë¥¼ ì‚¬ìš©í•œë‹¤.',
                'ë‹¤ë¥¸ ì‚¬ëŒì˜ ê°ì •ì„ ì´í•´í•˜ê³  ê³µê°í•œë‹¤.',
                'ì˜ê²¬ ì°¨ì´ê°€ ìˆì„ ë•Œ ê±´ì„¤ì ì¸ í† ë¡ ì„ ì´ëˆë‹¤.',
                'ìƒëŒ€ë°©ì´ ì´í•´í•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€ì— ë§ì¶° ì„¤ëª…í•œë‹¤.',
                'ì¤‘ìš”í•œ ë‚´ìš©ì€ ë°˜ë³µí•˜ì—¬ ì „ë‹¬í•œë‹¤.',
                'ìƒëŒ€ë°©ì˜ ë§ì„ ëê¹Œì§€ ë“¤ì€ í›„ì— ì‘ë‹µí•œë‹¤.',
                'ì§ˆë¬¸ì„ í†µí•´ ìƒëŒ€ë°©ì˜ ì˜ë„ë¥¼ ëª…í™•íˆ íŒŒì•…í•œë‹¤.',
                'ê¸ì •ì ì¸ ë¶„ìœ„ê¸°ì—ì„œ ëŒ€í™”í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤.',
                'ì„œë©´ìœ¼ë¡œë„ ëª…í™•í•˜ê³  ì²´ê³„ì ìœ¼ë¡œ ì˜ì‚¬ì†Œí†µí•œë‹¤.',
                
                // ë¦¬ë”ì‹­ (31-45)
                'íŒ€ì´ ëª©í‘œë¥¼ ë‹¬ì„±í•  ìˆ˜ ìˆë„ë¡ ë°©í–¥ì„ ì œì‹œí•œë‹¤.',
                'ì–´ë ¤ìš´ ê²°ì •ì„ ë‚´ë ¤ì•¼ í•  ë•Œ ì±…ì„ê°ì„ ê°€ì§€ê³  ê²°ì •í•œë‹¤.',
                'íŒ€ì›ë“¤ì˜ ëŠ¥ë ¥ì„ íŒŒì•…í•˜ê³  ì ì ˆí•œ ì—­í• ì„ ë¶€ì—¬í•œë‹¤.',
                'íŒ€ì›ë“¤ì´ ì„±ì¥í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³  ê²©ë ¤í•œë‹¤.',
                'ì†”ì„ ìˆ˜ë²”í•˜ì—¬ íŒ€ì˜ ëª¨ë²”ì´ ë˜ë ¤ê³  ë…¸ë ¥í•œë‹¤.',
                'íŒ€ì›ë“¤ì˜ ì˜ê²¬ì„ ìˆ˜ë ´í•˜ì—¬ ì˜ì‚¬ê²°ì •ì— ë°˜ì˜í•œë‹¤.',
                'ë³€í™”ê°€ í•„ìš”í•œ ìƒí™©ì—ì„œ íŒ€ì„ ì´ëŒì–´ê°„ë‹¤.',
                'íŒ€ì˜ ì„±ê³¼ì™€ ì‹¤íŒ¨ì— ëŒ€í•´ ì±…ì„ì„ ì§„ë‹¤.',
                'íŒ€ì›ë“¤ì—ê²Œ ë™ê¸°ë¥¼ ë¶€ì—¬í•˜ê³  ì˜ê°ì„ ì¤€ë‹¤.',
                'ê°ˆë“± ìƒí™©ì—ì„œ ì¤‘ì¬ì ì—­í• ì„ íš¨ê³¼ì ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤.',
                'íŒ€ì˜ ë¹„ì „ê³¼ ëª©í‘œë¥¼ ëª…í™•íˆ ì „ë‹¬í•œë‹¤.',
                'ìœ„ê¸° ìƒí™©ì—ì„œ ì¹¨ì°©í•˜ê²Œ íŒ€ì„ ì´ëˆë‹¤.',
                'íŒ€ì›ë“¤ì˜ ë‹¤ì–‘ì„±ì„ ì¸ì •í•˜ê³  í™œìš©í•œë‹¤.',
                'ì„±ê³¼ì— ëŒ€í•´ ì ì ˆí•œ ë³´ìƒê³¼ ì¸ì •ì„ ì œê³µí•œë‹¤.',
                'ì§€ì†ì ì¸ í•™ìŠµì„ í†µí•´ ë¦¬ë”ì‹­ ì—­ëŸ‰ì„ ê°œë°œí•œë‹¤.',
                
                // ì°½ì˜ì„± (46-60)
                'ê¸°ì¡´ê³¼ ë‹¤ë¥¸ ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ìì£¼ ì œì•ˆí•œë‹¤.',
                'ë‹¤ì–‘í•œ ê´€ì ì—ì„œ ë¬¸ì œë¥¼ ë°”ë¼ë³´ë ¤ê³  í•œë‹¤.',
                'ê¸°ì¡´ì˜ ë°©ì‹ì— ë§Œì¡±í•˜ì§€ ì•Šê³  ê°œì„ ë°©ì•ˆì„ ëª¨ìƒ‰í•œë‹¤.',
                'ìƒìƒë ¥ì„ ë°œíœ˜í•˜ì—¬ ë…ì°½ì ì¸ í•´ê²°ì±…ì„ ì°¾ëŠ”ë‹¤.',
                'ìƒˆë¡œìš´ ë³€í™”ë‚˜ ë„ì „ì„ ë‘ë ¤ì›Œí•˜ì§€ ì•ŠëŠ”ë‹¤.',
                'ì‹¤í—˜ì ì¸ ì ‘ê·¼ì„ ì‹œë„í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤.',
                'ë‹¤ë¥¸ ì‚¬ëŒì˜ ì•„ì´ë””ì–´ì—ì„œ ì˜ê°ì„ ì–»ì–´ ë°œì „ì‹œí‚¨ë‹¤.',
                'ë¸Œë ˆì¸ìŠ¤í† ë°ê³¼ ê°™ì€ ì°½ì˜ì  í™œë™ì— ì ê·¹ ì°¸ì—¬í•œë‹¤.',
                'ì˜ˆìˆ , ë¬¸í™” ë“± ë‹¤ì–‘í•œ ë¶„ì•¼ì— ê´€ì‹¬ì´ ë§ë‹¤.',
                'ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ì‹œë„ë¥¼ í•œë‹¤.',
                'ì¼ìƒì ì¸ ì—…ë¬´ì—ì„œë„ íš¨ìœ¨ì„±ì„ ë†’ì´ëŠ” ë°©ë²•ì„ ì°¾ëŠ”ë‹¤.',
                'ë‹¤ë¥¸ ë¶„ì•¼ì˜ ì§€ì‹ì„ í˜„ì¬ ì—…ë¬´ì— ì ìš©í•œë‹¤.',
                'í˜¸ê¸°ì‹¬ì´ ë§ê³  ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš°ë ¤ê³  í•œë‹¤.',
                'í‹€ì— ë°•íŒ ì‚¬ê³ ë³´ë‹¤ëŠ” ìœ ì—°í•œ ì‚¬ê³ ë¥¼ ì„ í˜¸í•œë‹¤.',
                'í˜ì‹ ì ì¸ ì•„ì´ë””ì–´ë¥¼ ì‹¤í˜„ ê°€ëŠ¥í•œ ê³„íšìœ¼ë¡œ êµ¬ì²´í™”í•œë‹¤.',
                
                // íŒ€ì›Œí¬ (61-75)
                'íŒ€ì˜ ëª©í‘œë¥¼ ê°œì¸ì˜ ëª©í‘œë³´ë‹¤ ìš°ì„ ì‹œí•œë‹¤.',
                'ë™ë£Œê°€ ë„ì›€ì„ ìš”ì²­í•  ë•Œ ê¸°êº¼ì´ í˜‘ë ¥í•œë‹¤.',
                'íŒ€ì›ë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ì›ë§Œí•˜ê²Œ ìœ ì§€í•œë‹¤.',
                'íŒ€ ë‚´ì—ì„œ ìì‹ ì˜ ì—­í• ê³¼ ì±…ì„ì„ ì¶©ì‹¤íˆ ìˆ˜í–‰í•œë‹¤.',
                'íŒ€ì˜ ì„±ê³¼ë¥¼ ìœ„í•´ ê°œì¸ì ì¸ í¬ìƒì„ ê°ìˆ˜í•  ìˆ˜ ìˆë‹¤.',
                'íŒ€ì›ë“¤ì˜ ì˜ê²¬ì„ ì¡´ì¤‘í•˜ê³  ê²½ì²­í•œë‹¤.',
                'íŒ€ í”„ë¡œì íŠ¸ì—ì„œ ì ê·¹ì ìœ¼ë¡œ ì°¸ì—¬í•œë‹¤.',
                'íŒ€ì›ë“¤ê³¼ ì •ë³´ì™€ ì§€ì‹ì„ ê³µìœ í•œë‹¤.',
                'íŒ€ì˜ ê²°ì •ì— ëŒ€í•´ ê°œì¸ì ìœ¼ë¡œ ë™ì˜í•˜ì§€ ì•Šì•„ë„ ì§€ì§€í•œë‹¤.',
                'íŒ€ì›ë“¤ì˜ ê°•ì ì„ ì¸ì •í•˜ê³  í™œìš©í•œë‹¤.',
                'íŒ€ ë‚´ ê°ˆë“±ì´ ìˆì„ ë•Œ í•´ê²°í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤.',
                'íŒ€ì˜ ì—…ë¬´ ë¶„ë‹´ì´ ê³µì •í•˜ê²Œ ì´ë£¨ì–´ì§€ë„ë¡ ë…¸ë ¥í•œë‹¤.',
                'íŒ€ì›ë“¤ì—ê²Œ ê±´ì„¤ì ì¸ í”¼ë“œë°±ì„ ì œê³µí•œë‹¤.',
                'íŒ€ì˜ ì„±ê³µì„ ìœ„í•´ ê°œì¸ì  ì„±ê³¼ë³´ë‹¤ íŒ€ ì„±ê³¼ë¥¼ ì¤‘ì‹œí•œë‹¤.',
                'ìƒˆë¡œìš´ íŒ€ì›ì´ í•©ë¥˜í–ˆì„ ë•Œ ì ì‘ì„ ë„ì™€ì¤€ë‹¤.'
            ];
        }
        
        // ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ì „ì—­ í•¨ìˆ˜ë¡œ ë“±ë¡
        window.openTestDetailModal = openTestDetailModal;
        window.closeTestDetailModal = closeTestDetailModal;
        window.toggleCategory = toggleCategory;
    </script>
</body>
</html>